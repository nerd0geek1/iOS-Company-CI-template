machine:
  xcode:
    version: '7.2'
  environment:
    override:
    LANG: en_US.UTF-8
dependencies:
  cache_directories:
    - 'vendor/bundle'
    - '/usr/local/bin/carthage'
    - '~/.cocoapods/repos/master/'
  override:
    - bundle install -j4 --path=vendor/bundle
    - rake security:add_key
    - bundle exec fastlane setup
test:
  override:
    - bundle exec fastlane test
deployment:
  iTunesConnect:
    branch: master
    commands:
      - rake build:prepare
      - bundle exec fastlane beta
      - rake build:save

  crashlytics:
    branch: develop
    commands:
      - rake build:prepare
      - bundle exec fastlane crashlytics
      - rake build:save
